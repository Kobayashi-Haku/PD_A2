<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>食品消費期限管理</title>
</head>
<body>
  <h1>食品消費期限管理</h1>

  <p>登録食品数: <strong th:text="${count}"></strong>
  / 期限切れ間近: <strong th:text="${warning}"></strong>
  / 期限切れ: <strong th:text="${expired}"></strong></p>

  <p><a href="/add">食品を追加</a></p>

  <table border="1" cellpadding="6">
    <thead>
      <tr><th>ID</th><th>名称</th><th>消費期限</th><th>状態</th><th>操作</th></tr>
    </thead>
    <tbody>
      <tr th:each="f : ${foods}">
        <td th:text="${f.id}"></td>
        <td th:text="${f.name}"></td>
        <td th:text="${f.expirationDate}"></td>
        <td>
          <span th:switch="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate)}">
            <span th:case="*" th:unless="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate) < 0}">
              <span th:if="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate) <= 3}">間近（残り<span th:text="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate)}"></span>日）</span>
              <span th:if="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate) > 3}">有効（残り<span th:text="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate)}"></span>日）</span>
            </span>
            <span th:case="*" th:if="${T(java.time.temporal.ChronoUnit).DAYS.between(T(java.time.LocalDate).now(), f.expirationDate) < 0}">期限切れ</span>
          </span>
        </td>
        <td>
          <form method="post" action="/delete" style="display:inline">
            <input type="hidden" name="id" th:value="${f.id}" />
            <button type="submit">削除</button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>
</body>
</html>
